// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`rosterCompareQuery rosterCompareQuery   1`] = `
{
   "runtime_mappings": {
      "is_high_major": {
         "type": "boolean",
         "script": {
            "source": "if (0 != doc['common_lookup'].size()) emit((doc['common_lookup'].value & 1) > 0)"
         }
      },
      "is_same_conf": {
         "type": "boolean",
         "script": {
            "source": "if (0 != doc['common_lookup'].size()) emit((doc['common_lookup'].value & 2) > 0)"
         }
      },
      "rank": {
         "type": "long",
         "script": {
            "source": "if (0 != doc['common_lookup'].size()) emit((doc['common_lookup'].value >> 2) & 511)"
         }
      },
      "_3p": {
         "type": "double",
         "script": {
            "source": "if (0 != doc['common_lookup'].size()) {\\n            def _3p = (doc['common_lookup'].value >> 11)  & 1023;\\n            if (_3p > 0) emit(0.1*_3p);\\n          }"
         }
      },
      "off_adj": {
         "type": "double",
         "script": {
            "source": "if (0 != doc['common_lookup'].size()) emit(0.1*((doc['common_lookup'].value >> 21) & 2047))"
         }
      },
      "def_adj": {
         "type": "double",
         "script": {
            "source": "if (0 != doc['common_lookup'].size()) emit(0.1*((doc['common_lookup'].value >> 32) & 2047))"
         }
      },
      "common_lookup": {
         "type": "long",
         "script": {
            "source": "\\n            if (!params.kp_info.isEmpty()) {\\n              def kp_name = params.pbp_to_kp[doc[\\"opponent.team.keyword\\"].value];\\n              if (kp_name == null) {\\n                 kp_name = doc[\\"opponent.team.keyword\\"].value;\\n              } else {\\n                 kp_name = kp_name.pbp_kp_team;\\n              }\\n              def oppo = params.kp_info[kp_name];\\n              if (oppo != null) {\\n                def is_high_major = oppo[\\"is_high_major\\"] ?: 1;\\n                def oppo_conf = oppo[\\"conf\\"];\\n                def is_same_conf = params.conf.equals(oppo_conf);\\n                def margin_rank = oppo[\\"stats.adj_margin.rank\\"] ?: 0;\\n\\n                def _3p = oppo[\\"stats.off._3p_pct.value\\"] ?: 0.0;\\n                _3p = (_3p * 10).longValue() & 1023;\\n\\n                def off_adj = oppo[\\"stats.adj_off.value\\"] ?: 0;\\n                off_adj = (off_adj * 10).longValue() & 2047;\\n\\n                def def_adj = oppo[\\"stats.adj_def.value\\"] ?: 0;\\n                def_adj = (def_adj * 10).longValue() & 2047;\\n\\n                long returnVal = 0L | (is_high_major << 0)\\n                  | ((is_same_conf ? 1 : 0) << 1)\\n                  | ((margin_rank & 511) << 2)\\n                  | (_3p.longValue() << 11)\\n                  | (off_adj.longValue() << 21)\\n                  | (def_adj.longValue() << 32)\\n                  ;\\n                emit(returnVal);\\n              }\\n            }\\n          ",
            "lang": "painless",
            "params": {
               "pbp_to_kp": {
                  "name1": "name1b"
               },
               "kp_info": {
                  "team": {
                     "stats": 0
                  }
               },
               "conf": ""
            }
         }
      }
   },
   "_source": {
      "includes": [],
      "excludes": []
   },
   "size": 0,
   "aggregations": {
      "tri_filter": {
         "filters": {
            "filters": {
               "off": {
                  "query_string": {
                     "query": "(players.id:(NOT *)) AND (players.id:(base))"
                  }
               },
               "on": {
                  "query_string": {
                     "query": "(players.id:(NOT *)) AND (players.id:(base))"
                  }
               },
               "baseline": {
                  "query_string": {
                     "query": "players.id:(base)"
                  }
               }
            }
         },
         "aggregations": {
            "global_poss_count": {
               "sum": {
                  "field": "team_stats.num_possessions"
               }
            },
            "player": {
               "terms": {
                  "field": "players.id.keyword",
                  "size": 100
               },
               "aggregations": {
                  "poss_count": {
                     "sum": {
                        "field": "team_stats.num_possessions"
                     }
                  },
                  "sort": {
                     "bucket_sort": {
                        "from": 0,
                        "sort": [
                           {
                              "poss_count": {
                                 "order": "desc"
                              }
                           }
                        ],
                        "size": 100
                     }
                  }
               }
            }
         }
      }
   },
   "query": {
      "bool": {
         "filter": [],
         "must_not": [],
         "should": [],
         "minimum_should_match": 0,
         "must": [
            {
               "term": {
                  "team.team.keyword": "TestTeam"
               }
            },
            {
               "query_string": {
                  "query": "rank:[10 TO 100]"
               }
            }
         ]
      }
   }
}
`;
